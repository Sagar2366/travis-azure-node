language: node_js

node_js:
  - "8"

before_install:
  - npm install -g npm@latest

cache:
  directories:
    - "node_modules"

before_install :
  - echo "starting installation of dependencies for node.js application"

install:
  - npm install http

after_install :
  - echo "Finishing installation process successfully !"


before_script :
  - echo "Running execution script !!!"

script :
  - node app.js
  - npm run test
  - npm run build

after_script :
  - echo "Running execution script successfully !!!"
    
before_deploy :
  - cd build

deploy :
  - provider : azure_web_apps
  - verbose : true
  - on:
    all_branches: true

after_deploy :
  - echo "Finishing deployment on to azure provider successfully !"